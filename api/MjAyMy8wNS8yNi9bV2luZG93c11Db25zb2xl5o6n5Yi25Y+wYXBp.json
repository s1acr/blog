{"title":"[Windows]Console控制台api","date":"2023-05-26T00:00:00.000Z","date_formatted":{"ll":"May 26, 2023","L":"05/26/2023","MM-DD":"05-26"},"link":"2023/05/26/[Windows]Console控制台api","comments":true,"updated":"2023-05-26T00:00:00.000Z","content":"<blockquote>\n<p>记些 windows 控制台 api</p>\n</blockquote>\n<h2 id=\"setconsoletextattribute()\">SetConsoleTextAttribute()<a title=\"#setconsoletextattribute()\" href=\"#setconsoletextattribute()\"></a></h2>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;windows.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// WINBASEAPI</span></span><br><span class=\"line\">\t<span class=\"comment\">// BOOL</span></span><br><span class=\"line\">\t<span class=\"comment\">//\tWINAPI</span></span><br><span class=\"line\">\t<span class=\"comment\">//\tSetConsoleTextAttribute(</span></span><br><span class=\"line\">\t<span class=\"comment\">//\t\t_In_ HANDLE hConsoleOutput,</span></span><br><span class=\"line\">\t<span class=\"comment\">//\t\t_In_ WORD wAttributes</span></span><br><span class=\"line\">\t<span class=\"comment\">//\t);</span></span><br><span class=\"line\">\t<span class=\"comment\">// 更改文字颜色  </span></span><br><span class=\"line\">\tHANDLE consoleHandle = <span class=\"built_in\">GetStdHandle</span>(STD_OUTPUT_HANDLE);  <span class=\"comment\">// 获取标准输出设备句柄</span></span><br><span class=\"line\">\t<span class=\"built_in\">SetConsoleTextAttribute</span>(consoleHandle, FOREGROUND_INTENSITY | FOREGROUND_RED);   <span class=\"comment\">// FOREGROUND_INTENSITY 指定是否强调</span></span><br><span class=\"line\">\tcout &lt;&lt; <span class=\"string\">&quot;这是加强的红色的文本&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">\t<span class=\"built_in\">SetConsoleTextAttribute</span>(consoleHandle, FOREGROUND_RED);</span><br><span class=\"line\">\tcout &lt;&lt; <span class=\"string\">&quot;这是不加强的红色的文本&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">\t<span class=\"built_in\">SetConsoleTextAttribute</span>(consoleHandle, FOREGROUND_INTENSITY | FOREGROUND_GREEN);  <span class=\"comment\">// 进行按位或运算</span></span><br><span class=\"line\">\tcout &lt;&lt; <span class=\"string\">&quot;这是绿色的文本&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">\t<span class=\"built_in\">SetConsoleTextAttribute</span>(consoleHandle, FOREGROUND_INTENSITY | FOREGROUND_BLUE);</span><br><span class=\"line\">\tcout &lt;&lt; <span class=\"string\">&quot;这是蓝色的文本&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">\t<span class=\"built_in\">SetConsoleTextAttribute</span>(consoleHandle, FOREGROUND_INTENSITY | FOREGROUND_RED | FOREGROUND_GREEN);</span><br><span class=\"line\">\tcout &lt;&lt; <span class=\"string\">&quot;这是黄色的文本&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">\t<span class=\"built_in\">SetConsoleTextAttribute</span>(consoleHandle, FOREGROUND_INTENSITY | FOREGROUND_RED | FOREGROUND_BLUE);</span><br><span class=\"line\">\tcout &lt;&lt; <span class=\"string\">&quot;这是洋红色的文本&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">\t<span class=\"built_in\">SetConsoleTextAttribute</span>(consoleHandle, FOREGROUND_INTENSITY | FOREGROUND_GREEN | FOREGROUND_BLUE);</span><br><span class=\"line\">\tcout &lt;&lt; <span class=\"string\">&quot;这是青色的文本&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">\t<span class=\"built_in\">SetConsoleTextAttribute</span>(consoleHandle, FOREGROUND_RED | FOREGROUND_GREEN | FOREGROUND_BLUE);  <span class=\"comment\">// 默认白文本</span></span><br><span class=\"line\">\tcout &lt;&lt; <span class=\"string\">&quot;这是白色的文本&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">\tcout &lt;&lt; <span class=\"string\">&quot;==================================&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">\t<span class=\"comment\">// 更改背景颜色</span></span><br><span class=\"line\">\t<span class=\"built_in\">SetConsoleTextAttribute</span>(consoleHandle, BACKGROUND_RED | FOREGROUND_RED | FOREGROUND_GREEN | FOREGROUND_BLUE);</span><br><span class=\"line\">\tcout &lt;&lt; <span class=\"string\">&quot;这是红色的背景，白色的文本&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">\t<span class=\"built_in\">SetConsoleTextAttribute</span>(consoleHandle, BACKGROUND_INTENSITY | BACKGROUND_GREEN);</span><br><span class=\"line\">\tcout &lt;&lt; <span class=\"string\">&quot;这是绿色的背景，黑色的文本&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">\t<span class=\"built_in\">SetConsoleTextAttribute</span>(consoleHandle, BACKGROUND_INTENSITY | BACKGROUND_BLUE);</span><br><span class=\"line\">\tcout &lt;&lt; <span class=\"string\">&quot;这是蓝色的背景，黑色的文本&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">\t<span class=\"built_in\">SetConsoleTextAttribute</span>(consoleHandle, BACKGROUND_INTENSITY | BACKGROUND_RED | BACKGROUND_GREEN);</span><br><span class=\"line\">\tcout &lt;&lt; <span class=\"string\">&quot;这是黄色的背景，黑色的文本&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">\t<span class=\"built_in\">SetConsoleTextAttribute</span>(consoleHandle, BACKGROUND_INTENSITY | BACKGROUND_RED | BACKGROUND_BLUE);</span><br><span class=\"line\">\tcout &lt;&lt; <span class=\"string\">&quot;这是洋红色的背景，黑色的文本&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">\t<span class=\"built_in\">SetConsoleTextAttribute</span>(consoleHandle, BACKGROUND_INTENSITY | BACKGROUND_GREEN | BACKGROUND_BLUE);</span><br><span class=\"line\">\tcout &lt;&lt; <span class=\"string\">&quot;这是青色的背景，黑色的文本&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">\t<span class=\"built_in\">SetConsoleTextAttribute</span>(consoleHandle, BACKGROUND_INTENSITY | BACKGROUND_RED | BACKGROUND_GREEN | BACKGROUND_BLUE);</span><br><span class=\"line\">\tcout &lt;&lt; <span class=\"string\">&quot;这是白色的背景，黑色的文本&quot;</span> &lt;&lt; endl;  \t</span><br><span class=\"line\">\t<span class=\"built_in\">SetConsoleTextAttribute</span>(consoleHandle, <span class=\"number\">0</span>);  <span class=\"comment\">// 默认黑色背景</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://cdn.jsdelivr.net/gh/s1acr/PicGoLib@main/Typora/202305272119570.png\" alt=\"\" loading=\"lazy\" class=\"φbp\"></p>\n<h2 id=\"_getch()-_getwch()\">_getch() _getwch()<a title=\"#_getch()-_getwch()\" href=\"#_getch()-_getwch()\"></a></h2>\n<p>定义再&lt;conio.h&gt; 类似getchar， 但在不回显字符的情况下读取输入。<br>\n_getch 和 _getwch 函数从不回显字符的控制台读取单个字符。 若要读取函数键或箭头键，必须调用每个函数两次。 第一个调用返回 0 或 0xE0。 第二次调用返回键扫描代码。<br>\n<a href=\"https://learn.microsoft.com/zh-cn/cpp/c-runtime-library/reference/getch-getwch?view=msvc-170\" target=\"_blank\">https://learn.microsoft.com/zh-cn/cpp/c-runtime-library/reference/getch-getwch?view=msvc-170</a><br>\nKey Scan Codes<br>\n<a href=\"https://learn.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-6.0/aa299374(v=vs.60)\" target=\"_blank\">https://learn.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-6.0/aa299374(v=vs.60)</a></p>\n<h2 id=\"setconsolecursorposition()\">SetConsoleCursorPosition()<a title=\"#setconsolecursorposition()\" href=\"#setconsolecursorposition()\"></a></h2>\n<p>得到光标坐标</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">BOOL WINAPI <span class=\"title\">SetConsoleCursorPosition</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">  _In_ HANDLE hConsoleOutput,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">  _In_ COORD  dwCursorPosition</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">)</span></span>;</span><br></pre></td></tr></table></figure>\n<p>写了个井字棋<br>\n<a href=\"https://github.com/s1acr/TicTacToc\" target=\"_blank\">https://github.com/s1acr/TicTacToc</a></p>\n<p><strong>参考</strong></p>\n<ol>\n<li><a href=\"https://learn.microsoft.com/zh-cn/windows/console/\" target=\"_blank\">Windows官方中文文档</a></li>\n<li><a href=\"https://blog.csdn.net/weixin_48178135/article/details/121306169\" target=\"_blank\">【C++】Windows控制台API基本使用(上)</a></li>\n</ol>\n","prev":{"title":"[gitbook]简单使用","link":"2023/05/29/[gitbook]简单使用"},"next":{"title":"错乱","link":"2023/05/26/错乱"},"plink":"https://s1acr.github.io/2023/05/26/[Windows]Console控制台api/","toc":[{"id":"setconsoletextattribute()","title":"SetConsoleTextAttribute()","index":"1"},{"id":"_getch()-_getwch()","title":"_getch() _getwch()","index":"2"},{"id":"setconsolecursorposition()","title":"SetConsoleCursorPosition()","index":"3"}],"reward":true,"copyright":{"author":"slacr_","license":"<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" target=\"_blank\"><img src = \"/lib/cc-by-nc-sa.svg\">CC BY-NC-ND 4.0</a>","published":"May 26, 2023","updated":"May 26, 2023"},"reading_time":"574 words in 4 min"}